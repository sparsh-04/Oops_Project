<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  <script src="//geodata.solutions/includes/countrystatecity.js"></script> -->
</head>
<body>
  <script type="text/javascript">
    function ajaxCall() {
      this.send = function(data, url, method, success, type) {
          type = 'json';
          var successRes = function(data) {
              success(data);
          }
          var errorRes = function(xhr, ajaxOptions, thrownError) {            
              console.log(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
          }
          jQuery.ajax({
              url: url,
              type: method,
              data: data,
              success: successRes,
              error: errorRes,
              dataType: type,
              timeout: 60000
          });
      }
  }
  
  function locationInfo() {
      var rootUrl = "https://geodata.phplift.net/api/index.php";
      var call = new ajaxCall();
      this.getCities = function(id) {
          jQuery(".cities option:gt(0)").remove();
          var url = rootUrl+'?type=getCities&countryId='+ '&stateId=' + id;
          var method = "post";
          var data = {};
          jQuery('.cities').find("option:eq(0)").html("Please wait..");
          call.send(data, url, method, function(data) {
              jQuery('.cities').find("option:eq(0)").html("Select City");
                  var listlen = Object.keys(data['result']).length;
                  if(listlen > 0)
                  {
                      jQuery.each(data['result'], function(key, val) {
                          var option = jQuery('');
                          option.attr('value', val.name).text(val.name);
                          jQuery('.cities').append(option);
                      });
                  }
                  jQuery(".cities").prop("disabled",false);
          });
      };
  
      this.getStates = function(id) {
          jQuery(".states option:gt(0)").remove();
          jQuery(".cities option:gt(0)").remove();
          var stateClasses = jQuery('#stateId').attr('class');
  
          
          var url = rootUrl+'?type=getStates&countryId=' + id;
          var method = "post";
          var data = {};
          jQuery('.states').find("option:eq(0)").html("Please wait..");
          call.send(data, url, method, function(data) {
              jQuery('.states').find("option:eq(0)").html("Select State");
              
                  jQuery.each(data['result'], function(key, val) {
                      var option = jQuery('');
                      option.attr('value', val.name).text(val.name);
                      option.attr('stateid', val.id);
                      jQuery('.states').append(option);
                  });
                  jQuery(".states").prop("disabled",false);
              
          });
      };
  
      this.getCountries = function() {
          var url = rootUrl+'?type=getCountries';
          var method = "post";
          var data = {};
          jQuery('.countries').find("option:eq(0)").html("Please wait..");
          call.send(data, url, method, function(data) {
              jQuery('.countries').find("option:eq(0)").html("Select Country");
              
              jQuery.each(data['result'], function(key, val) {
                  var option = jQuery('');
                  
                  option.attr('value', val.name).text(val.name);
                  option.attr('countryid', val.id);
                  
                  jQuery('.countries').append(option);
              });
                  // jQuery(".countries").prop("disabled",false);
              
          });
      };
  
  }
  
  jQuery(function() {
      var loc = new locationInfo();
      loc.getCountries();
      jQuery(".countries").on("change", function(ev) {
          var countryId = jQuery("option:selected", this).attr('countryid');
          if(countryId != ''){
              loc.getStates(countryId);
          }
          else{
              jQuery(".states option:gt(0)").remove();
          }
      });
      jQuery(".states").on("change", function(ev) {
          var stateId = jQuery("option:selected", this).attr('stateid');
          if(stateId != ''){
              loc.getCities(stateId);
          }
          else{
              jQuery(".cities option:gt(0)").remove();
          }
      });
  });
  
  </script>

  
  <form action="" method="post">  
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <h3>Country</h3>
          <select name="country" class="countries form-control" id="countryId">
        <option value="">Select Country</option>
    </select>
  
        </div>
        <div class="col-sm-4">
          <h3>State</h3>
          <select name="state" class="states form-control" id="stateId">
        <option value="">Select State</option>
    </select>
        </div>
        <div class="col-sm-4">
          <h3>City</h3>        
          <select name="city" class="cities form-control" id="cityId">
        <option value="">Select City</option>
    </select>
        </div>
      </div>
    </div>
  </form>

</body>
</html>